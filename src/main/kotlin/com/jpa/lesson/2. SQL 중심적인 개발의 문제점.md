# SQL 중심적인 개발의 문제점
## DB의 헤게모니 
- 아직까지는 관계형 DB 

--- 
### 무한 반복, 지루한 코드  
- 객체 CRUD - 필드 추가(**tel**이란 필드 추가 시) 
  - 쿼리마다 필드를 모두 추가해줘야함
  - select id, name, **tel** from member
  - insert into member(id, name, **tel**) values ... 
- SQL에 의존적인 개발을 피하기 어렵다.

---
## 패러다임의 불일치
### 객체 vs 관계형 데이터베이스 
- 객체를 영구보관하는 다양한 저장소 
  - RDB, NoSQL, File 등 
- 가장 현실적인 대안은 관계형 데이터베이스 
  - 기존에는 개발자들이 SQL 매퍼 역할을 수행했음 
| 구성 | 객체 | 관계형 데이터베이스 |
|---|---|---|
| 상속 | 있음 | 테이블 슈퍼타입, 서브타입이 유사함  |
| 연관관계 | 참조로 데이터 가져옴 | pk, fk, join 등으로 데이터 가져옴 |
| 데이터 타입 |||  
| 데이터 식별 방법 |||         

- 슈퍼타입, 서브타입 등으로 나눠지면 테이블이 쪼개진거기 때문에 한 데이터 저장을 위해 각각의 테이블에 일일이 데이터 넣어야함(왜냐면 테이블이 쪼개졌으니까)
  - 자바 객체의 경우에 collection에 데이터를 넣는다치면 list.add()만 해주면 추가됨
  
- insert 할 때는 연관관계를 어떻게 들어가지만 select 할 경우에 참조관계가 있는 객체를 뽑아내기가 어렵다.
```java
    public Member find(String memberId) {
        // sql 데이터 조회

        // Member와 Team이 참조관계가 있을 경우
        // Member에 조회한 데이터 입력  
        Member member = new Member();
         
        // Team에 조회한 데이터 입력
        Team team = new Team();
        
        member.setTeam(team);
        return team;
    }    
```  

### 객체 그래프 탐색 
객체는 자유롭게 객체 그래프를 탐색할 수 있어야한다.
- 연관된 객체끼리 탐색 가능해야한다 

### 엔티티 신뢰 문제

---
> 계층형 아키텍처 - 진정한 의미의 계층분할이 어렵다. 
- 자바 콜렉션 구조와 관계형 데이터베이스에서의 데이터 조회가 안 맞다. 
  - DB에서 같은 객체를 조회해도 참조하는 주소값이 다름 
  - 컬렉션에서는 같은 아이디로 가져오면 같은 객체임(list.get(100) == list.get(100))
   
--- 
### 자바 컬렉션을 쓰듯이 DB를 쓸 수 없을까? 
> 이러한 요구사항이 JPA가 나오는 계기가 되었다.      
 